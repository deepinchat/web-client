<div class="contact-edit-container">
  @if(form) {
  <form [formGroup]="form" class="contact-edit-form" (ngSubmit)="onSubmit()">
    
    <!-- Basic Information -->
    <div class="form-section">
      <h3 class="section-title">
        <mat-icon>person</mat-icon>
        Basic Information
      </h3>
      
      <mat-form-field appearance="outline">
        <mat-label>Display Name</mat-label>
        <input matInput formControlName="name" placeholder="Enter display name" required>
        @if(form && form.get('name')?.invalid && form.get('name')?.touched) {
        <mat-error>{{ getErrorMessage('name') }}</mat-error>
        }
      </mat-form-field>

      <div class="name-row">
        <mat-form-field appearance="outline">
          <mat-label>First Name</mat-label>
          <input matInput formControlName="firstName" placeholder="First name">
        </mat-form-field>
        <mat-form-field appearance="outline">
          <mat-label>Last Name</mat-label>
          <input matInput formControlName="lastName" placeholder="Last name">
        </mat-form-field>
      </div>

      <mat-form-field appearance="outline">
        <mat-label>Company</mat-label>
        <input matInput formControlName="company" placeholder="Company name">
      </mat-form-field>
    </div>

    <!-- Contact Information -->
    <div class="form-section">
      <h3 class="section-title">
        <mat-icon>contact_mail</mat-icon>
        Contact Information
      </h3>

      <div class="contact-row">
        <mat-form-field appearance="outline">
          <mat-label>Email</mat-label>
          <input matInput formControlName="email" type="email" placeholder="email@example.com">
          @if(form && form.get('email')?.invalid && form.get('email')?.touched) {
          <mat-error>{{ getErrorMessage('email') }}</mat-error>
          }
        </mat-form-field>
        <mat-form-field appearance="outline">
          <mat-label>Phone Number</mat-label>
          <input matInput formControlName="phoneNumber" placeholder="Phone number">
        </mat-form-field>
      </div>

      <mat-form-field appearance="outline">
        <mat-label>Address</mat-label>
        <textarea matInput formControlName="address" rows="3" placeholder="Enter address"></textarea>
      </mat-form-field>
    </div>

    <!-- Notes -->
    <div class="form-section">
      <h3 class="section-title">
        <mat-icon>note</mat-icon>
        Notes
      </h3>

      <mat-form-field appearance="outline">
        <mat-label>Notes</mat-label>
        <textarea matInput formControlName="notes" rows="4" placeholder="Add notes..."></textarea>
      </mat-form-field>
    </div>

    <!-- Actions -->
    <div class="form-actions">
      <button mat-button type="button" (click)="onCancel()" [disabled]="isSaving">
        Cancel
      </button>
      <button mat-raised-button color="primary" type="submit" [disabled]="!form || form.invalid || isSaving">
        @if(isSaving) {
        <mat-spinner diameter="20"></mat-spinner>
        } @else {
        <mat-icon>save</mat-icon>
        }
        {{ isSaving ? 'Saving...' : 'Save' }}
      </button>
    </div>

  </form>
  }
</div>