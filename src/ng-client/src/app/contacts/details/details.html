<div class="contact-details-container">
  @if (isLoading) {
  <div class="loading-overlay">
    <mat-spinner diameter="40"></mat-spinner>
  </div>
  }

  @if (contact && !isLoading) {
  <div class="contact-details-content">
    
    <!-- Basic Information -->
    <div class="details-section">
      <h3 class="section-title">
        <mat-icon>person</mat-icon>
        Basic Information
      </h3>
      
      <div class="details-grid">
        <div class="detail-item">
          <label class="detail-label">Display Name</label>
          <div class="detail-value">{{ contact.name || 'Not provided' }}</div>
        </div>
        
        <div class="detail-item">
          <label class="detail-label">First Name</label>
          <div class="detail-value">{{ contact.profile.firstName }}</div>
        </div>
        
        <div class="detail-item">
          <label class="detail-label">Last Name</label>
          <div class="detail-value">{{ contact.profile.lastName }}</div>
        </div>
        
        <div class="detail-item">
          <label class="detail-label">Company</label>
          <div class="detail-value">{{ contact.profile.company }}</div>
        </div>
      </div>
    </div>

    <!-- Contact Information -->
    <div class="details-section">
      <h3 class="section-title">
        <mat-icon>contact_mail</mat-icon>
        Contact Information
      </h3>
      
      <div class="details-grid">
        <div class="detail-item">
          <label class="detail-label">Email</label>
          <div class="detail-value">
            @if (contact.profile.email) {
            <a [href]="'mailto:' + contact.profile.email" class="contact-link">
              <mat-icon>email</mat-icon>
              {{ contact.profile.email }}
            </a>
            } @else {
            <span>Not provided</span>
            }
          </div>
        </div>
        
        <div class="detail-item">
          <label class="detail-label">Phone Number</label>
          <div class="detail-value">
            @if (contact.profile.phoneNumber) {
            <a [href]="'tel:' + contact.profile.phoneNumber" class="contact-link">
              <mat-icon>phone</mat-icon>
              {{ contact.profile.phoneNumber }}
            </a>
            } @else {
            <span>Not provided</span>
            }
          </div>
        </div>
        
        <div class="detail-item">
          <label class="detail-label">Location</label>
          <div class="detail-value">{{ contact.profile.location }}</div>
        </div>
      </div>
    </div>

    <!-- Additional Information -->
    <div class="details-section">
      <h3 class="section-title">
        <mat-icon>info</mat-icon>
        Additional Information
      </h3>
      
      <div class="details-grid">
        <div class="detail-item">
          <label class="detail-label">Notes</label>
          <div class="detail-value notes-value">{{ contact.notes || 'No notes available' }}</div>
        </div>
        
        <div class="detail-item">
          <label class="detail-label">Created</label>
          <div class="detail-value">{{ formatDate(contact.createdAt) }}</div>
        </div>
        
        <div class="detail-item">
          <label class="detail-label">Last Updated</label>
          <div class="detail-value">{{ formatDate(contact.updatedAt) }}</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Actions -->
  <div class="actions">
    <button mat-button (click)="onBack()" class="back-button">
      <mat-icon>arrow_back</mat-icon>
      Back to Contacts
    </button>
    
    @if (contact) {
    <button mat-button (click)="onToggleStar()" 
            [class.starred]="contact.isStarred"
            class="star-button">
      <mat-icon>{{ contact.isStarred ? 'star' : 'star_border' }}</mat-icon>
      {{ contact.isStarred ? 'Unstar' : 'Star' }}
    </button>
    
    <button mat-button (click)="onToggleBlock()" 
            [class.blocked]="contact.isBlocked"
            class="block-button">
      <mat-icon>{{ contact.isBlocked ? 'lock_open' : 'block' }}</mat-icon>
      {{ contact.isBlocked ? 'Unblock' : 'Block' }}
    </button>
    
    <button mat-raised-button color="primary" (click)="onEdit()" class="edit-button">
      <mat-icon>edit</mat-icon>
      Edit Contact
    </button>
    }
  </div>
  }

  @if (!contact && !isLoading) {
  <div class="loading-overlay">
    <mat-icon>person_off</mat-icon>
    <p>Contact not found</p>
  </div>
  }
</div>
